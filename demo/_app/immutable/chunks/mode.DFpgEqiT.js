import{S as y}from"./scheduler.CjD0NZ8o.js";import{d as p,w as l}from"./index.BLWFmFSp.js";let h,g;function k(t){if(typeof document>"u")return;clearTimeout(h),clearTimeout(g);const n=document.createElement("style"),i=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);n.appendChild(i);const e=()=>document.head.appendChild(n),o=()=>document.head.removeChild(n);if(typeof window.getComputedStyle<"u"){e(),t(),window.getComputedStyle(n).opacity,o();return}if(typeof window.requestAnimationFrame<"u"){e(),t(),window.requestAnimationFrame(o);return}e(),h=window.setTimeout(()=>{t(),g=window.setTimeout(o,120)},120)}const b={getItem:t=>null,setItem:(t,n)=>{}},d=typeof document<"u",S=["dark","light","system"],u="mode-watcher-mode",m=L(),v=T(),M=l(void 0),E=l(!0),I=V();function L(){const t="system",n=d?localStorage:b,i=n.getItem(u);let e=w(i)?i:t;const{subscribe:o,set:s}=l(e,()=>{if(!d)return;const r=c=>{if(c.key!==u)return;const f=c.newValue;w(f)?s(e=f):s(e=t)};return addEventListener("storage",r),()=>removeEventListener("storage",r)});function a(r){s(e=r),n.setItem(u,e)}return{subscribe:o,set:a}}function T(){let n=!0;const{subscribe:i,set:e}=l(void 0,()=>{if(!d)return;const a=c=>{n&&e(c.matches?"light":"dark")},r=window.matchMedia("(prefers-color-scheme: light)");return r.addEventListener("change",a),()=>r.removeEventListener("change",a)});function o(){if(!d)return;const a=window.matchMedia("(prefers-color-scheme: light)");e(a.matches?"light":"dark")}function s(a){n=a}return{subscribe:i,query:o,tracking:s}}function V(){const{subscribe:t}=p([m,v,M,E],([n,i,e,o])=>{if(!d)return;const s=n==="system"?i:n;function a(){const r=document.documentElement,c=document.querySelector('meta[name="theme-color"]');s==="light"?(r.classList.remove("dark"),r.style.colorScheme="light",c&&e&&c.setAttribute("content",e.light)):(r.classList.add("dark"),r.style.colorScheme="dark",c&&e&&c.setAttribute("content",e.dark))}return o?k(a):a(),s});return{subscribe:t}}function w(t){return typeof t!="string"?!1:S.includes(t)}function q(){m.set(y(I)==="dark"?"light":"dark")}function x(t){m.set(t)}function C(t,n){const i=document.documentElement,e=localStorage.getItem("mode-watcher-mode")||t,o=e==="light"||e==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(i.classList[o?"remove":"add"]("dark"),i.style.colorScheme=o?"light":"dark",n){const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",e==="light"?n.light:n.dark)}localStorage.setItem("mode-watcher-mode",e)}export{I as a,v as b,x as c,E as d,q as e,w as i,u as l,C as s,M as t};
