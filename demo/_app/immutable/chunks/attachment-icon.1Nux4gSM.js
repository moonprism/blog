function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./highlight.DGAr_9BG.js","./preload-helper.D6kgxu3v.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{s as ue,l as K,m as ut,x as it,y as lt,z as rt,A as ct,E as Y,P as ft,e as V,R as jt,a as Q,b as O,d as A,T as At,g as X,h as j,p as zt,H as Z,i as Qt,O as dt,ag as mt,M as ht,w as we,q as _t,r as bt,n as Re,o as D,Z as Se,ah as Ie,t as Be,f as Ne,Q as Pe,ai as st,aj as at,I as pt,K as Te}from"./scheduler.CZixQE4Q.js";import{S as fe,i as de,d as I,v as me,e as L,f as x,m as U,t as v,h as R,j as q,a as S,g as P,b as C,c as N,l as F,o as z,k as H,q as ne,n as oe,s as je,p as ye}from"./index.BQyUQ7-O.js";import{g as ce,a as ae}from"./spread.CgU5AtxT.js";import{d as ie,a as Xt}from"./data.BdekvrTf.js";import{_ as gt}from"./preload-helper.D6kgxu3v.js";import{B as Kt}from"./index.d54aZTw6.js";import{I as Ht}from"./Icon.Ck4kGTw8.js";function Vt(n){let e;const t=n[2].default,r=it(t,n,n[3],null),l={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,c){r&&r.m(a,c),e=!0},p:function(a,c){r&&r.p&&(!e||c&8)&&lt(r,t,a,a[3],e?ct(t,a[3],c,null):rt(a[3]),null)},i:function(a){e||(v(r,a),e=!0)},o:function(a){R(r,a),e=!1},d:function(a){r&&r.d(a)}};return I("SvelteRegisterBlock",{block:l,id:Vt.name,type:"slot",source:'(22:0) <Icon name=\\"image-plus\\" {...$$props} iconNode={iconNode}>',ctx:n}),l}function Ae(n){let e,t;const r=[{name:"image-plus"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[Vt]},$$scope:{ctx:n}};for(let a=0;a<r.length;a+=1)l=K(l,r[a]);e=new Ht({props:l,$$inline:!0});const s={c:function(){L(e.$$.fragment)},l:function(c){x(e.$$.fragment,c)},m:function(c,u){U(e,c,u),t=!0},p:function(c,[u]){const i=u&3?ce(r,[r[0],u&2&&ae(c[1]),u&1&&{iconNode:c[0]}]):{};u&8&&(i.$$scope={dirty:u,ctx:c}),e.$set(i)},i:function(c){t||(v(e.$$.fragment,c),t=!0)},o:function(c){R(e.$$.fragment,c),t=!1},d:function(c){q(e,c)}};return I("SvelteRegisterBlock",{block:s,id:Ae.name,type:"component",source:"",ctx:n}),s}function Gt(n,e,t){let{$$slots:r={},$$scope:l}=e;me("Image_plus",r,["default"]);const s=[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];return n.$$set=a=>{t(1,e=K(K({},e),ut(a))),"$$scope"in a&&t(3,l=a.$$scope)},n.$capture_state=()=>({Icon:Ht,iconNode:s}),n.$inject_state=a=>{t(1,e=K(K({},e),a))},e&&"$$inject"in e&&n.$inject_state(e.$$inject),e=ut(e),[s,e,r,l]}class Ot extends fe{constructor(e){super(e),de(this,e,Gt,Ae,ue,{}),I("SvelteRegisterComponent",{component:this,tagName:"Image_plus",options:e,id:Ae.name})}}const Yt="node_modules/carta-md/dist/internal/components/Renderer.svelte";function ze(n){let e;const t=n[6].default,r=it(t,n,n[5],null),l={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,c){r&&r.m(a,c),e=!0},p:function(a,c){r&&r.p&&(!e||c&32)&&lt(r,t,a,a[5],e?ct(t,a[5],c,null):rt(a[5]),null)},i:function(a){e||(v(r,a),e=!0)},o:function(a){R(r,a),e=!1},d:function(a){r&&r.d(a)}};return I("SvelteRegisterBlock",{block:l,id:ze.name,type:"if",source:"(34:1) {#if mounted}",ctx:n}),l}function He(n){let e,t,r,l,s,a,c=n[1]&&ze(n);const u={c:function(){e=V("div"),t=new jt(!1),r=Q(),c&&c.c(),this.h()},l:function(o){e=O(o,"DIV",{class:!0});var f=A(e);t=At(f,!1),r=X(f),c&&c.l(f),f.forEach(S),this.h()},h:function(){t.a=r,P(e,"class","carta-renderer markdown-body s-duGd1yijT2ab"),j(e,Yt,30,0,792)},m:function(o,f){C(o,e,f),t.m(n[2],e),N(e,r),c&&c.m(e,null),n[8](e),l=!0,s||(a=F(e,"scroll",n[7],!1,!1,!1,!1),s=!0)},p:function(o,[f]){(!l||f&4)&&t.p(o[2]),o[1]?c?(c.p(o,f),f&2&&v(c,1)):(c=ze(o),c.c(),v(c,1),c.m(e,null)):c&&(z(),R(c,1,1,()=>{c=null}),H())},i:function(o){l||(v(c),l=!0)},o:function(o){R(c),l=!1},d:function(o){o&&S(e),c&&c.d(),n[8](null),s=!1,a()}};return I("SvelteRegisterBlock",{block:u,id:He.name,type:"component",source:"",ctx:n}),u}function xt(n,e,t){let{$$slots:r={},$$scope:l}=e;me("Renderer",r,["default"]);let{carta:s}=e,{value:a}=e,{elem:c}=e,u=!1,i=s.renderSSR(a);const o=ie(d=>{s.render(d).then(E=>{t(2,i=""),t(2,i=E)}).then(()=>m("render",void 0))},s.rendererDebounce??300),f=d=>{o(d)};Y(()=>s.$setRenderer(c)),Y(()=>t(1,u=!0));const m=ft();n.$$.on_mount.push(function(){s===void 0&&!("carta"in e||n.$$.bound[n.$$.props.carta])&&console.warn("<Renderer> was created without expected prop 'carta'"),a===void 0&&!("value"in e||n.$$.bound[n.$$.props.value])&&console.warn("<Renderer> was created without expected prop 'value'"),c===void 0&&!("elem"in e||n.$$.bound[n.$$.props.elem])&&console.warn("<Renderer> was created without expected prop 'elem'")});const _=["carta","value","elem"];Object.keys(e).forEach(d=>{!~_.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Renderer> was created with unknown prop '${d}'`)});function h(d){zt.call(this,n,d)}function p(d){Z[d?"unshift":"push"](()=>{c=d,t(0,c)})}return n.$$set=d=>{"carta"in d&&t(3,s=d.carta),"value"in d&&t(4,a=d.value),"elem"in d&&t(0,c=d.elem),"$$scope"in d&&t(5,l=d.$$scope)},n.$capture_state=()=>({createEventDispatcher:ft,onMount:Y,debounce:ie,carta:s,value:a,elem:c,mounted:u,renderedHtml:i,debouncedRenderer:o,onValueChange:f,events:m}),n.$inject_state=d=>{"carta"in d&&t(3,s=d.carta),"value"in d&&t(4,a=d.value),"elem"in d&&t(0,c=d.elem),"mounted"in d&&t(1,u=d.mounted),"renderedHtml"in d&&t(2,i=d.renderedHtml)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&18&&u&&f(a)},[c,u,i,s,a,l,r,h,p]}class Dt extends fe{constructor(e){super(e),de(this,e,xt,He,ue,{carta:3,value:4,elem:0}),I("SvelteRegisterComponent",{component:this,tagName:"Renderer",options:e,id:He.name})}get carta(){throw new Error("<Renderer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set carta(e){throw new Error("<Renderer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<Renderer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Renderer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem(){throw new Error("<Renderer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem(e){throw new Error("<Renderer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function wt(n,e,t){const r=Xt(e.replaceAll(`\r
`,`
`),t.replaceAll(`\r
`,`
`)),l=$t(n);if(l.length==0){const f=vt(n);if(!f)return;l.push(f)}let s=0,a=0;const c=f=>{let m=0;for(;m<f&&s<l.length;){const p=(l[s].textContent??"").length-a,d=Math.min(p,f-m);m+=d,a+=d,d==p&&(s++,a=0)}},u=f=>{c(f.value.length)},i=f=>{const m=l.at(s)??vt(n);if(!m)return;const _=m.textContent??"",h=_.slice(0,a),p=_.slice(a);m.textContent=h+f.value+p,c(f.value.length)},o=f=>{let m=f.value.length;for(;m>0;){const _=l.at(s);if(!_)return;const h=_.textContent??"",p=h.length-a,d=Math.min(p,m);_.textContent=h.slice(0,a)+h.slice(a+d),m-=d,d==p&&(s++,a=0)}};for(const f of r)f.added?i(f):f.removed?o(f):u(f)}function $t(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);for(;t.nextNode();)e.push(t.currentNode);return e}function vt(n){const e=Array.from(n.querySelectorAll(".line")).at(-1);if(!e)return null;const t=document.createTextNode("");return e.appendChild(t),e.setAttribute("data-temp-node","true"),t}const Ee="node_modules/carta-md/dist/internal/components/Input.svelte";function Ve(n){let e;const t=n[14].default,r=it(t,n,n[13],null),l={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,c){r&&r.m(a,c),e=!0},p:function(a,c){r&&r.p&&(!e||c&8192)&&lt(r,t,a,a[13],e?ct(t,a[13],c,null):rt(a[13]),null)},i:function(a){e||(v(r,a),e=!0)},o:function(a){R(r,a),e=!1},d:function(a){r&&r.d(a)}};return I("SvelteRegisterBlock",{block:l,id:Ve.name,type:"if",source:"(142:1) {#if mounted}",ctx:n}),l}function Oe(n){let e,t="Press ESC then TAB to move the focus off the field",r,l,s,a,c,u,i,o,f,m,_,h=[{spellcheck:"false"},{class:"carta-font-code"},{"aria-multiline":"true"},{"aria-describedby":"editor-unfocus-suggestion"},{tabindex:"0"},{placeholder:n[2]},n[3]],p={};for(let T=0;T<h.length;T+=1)p=K(p,h[T]);let d=n[8]&&Ve(n);const E={c:function(){e=V("div"),e.textContent=t,r=Q(),l=V("div"),s=V("div"),a=V("div"),c=new jt(!1),u=Q(),i=V("textarea"),o=Q(),d&&d.c(),this.h()},l:function(g){e=O(g,"DIV",{role:!0,id:!0,class:!0,"data-svelte-h":!0}),Qt(e)!=="svelte-167gk2c"&&(e.textContent=t),r=X(g),l=O(g,"DIV",{role:!0,tabindex:!0,class:!0});var y=A(l);s=O(y,"DIV",{class:!0});var B=A(s);a=O(B,"DIV",{class:!0,tabindex:!0,"aria-hidden":!0});var W=A(a);c=At(W,!1),W.forEach(S),u=X(B),i=O(B,"TEXTAREA",{spellcheck:!0,class:!0,"aria-multiline":!0,"aria-describedby":!0,tabindex:!0,placeholder:!0}),A(i).forEach(S),B.forEach(S),o=X(y),d&&d.l(y),y.forEach(S),this.h()},h:function(){P(e,"role","tooltip"),P(e,"id","editor-unfocus-suggestion"),P(e,"class","s-Z_BxhC3l0TFj"),j(e,Ee,104,0,2805),c.a=null,P(a,"class","carta-highlight carta-font-code s-Z_BxhC3l0TFj"),P(a,"tabindex","-1"),P(a,"aria-hidden","true"),j(a,Ee,117,2,3103),dt(i,p),mt(i,"s-Z_BxhC3l0TFj",!0),j(i,Ee,126,2,3309),P(s,"class","carta-input-wrapper s-Z_BxhC3l0TFj"),j(s,Ee,116,1,3043),P(l,"role","textbox"),P(l,"tabindex","-1"),P(l,"class","carta-input s-Z_BxhC3l0TFj"),j(l,Ee,107,0,2916)},m:function(g,y){C(g,e,y),C(g,r,y),C(g,l,y),N(l,s),N(s,a),c.m(n[7],a),n[16](a),N(s,u),N(s,i),i.autofocus&&i.focus(),ht(i,n[0]),n[18](i),n[21](s),N(l,o),d&&d.m(l,null),n[22](l),f=!0,m||(_=[F(i,"input",n[17]),F(i,"scroll",n[19],!1,!1,!1,!1),F(i,"keydown",n[20],!1,!1,!1,!1),F(l,"click",n[10],!1,!1,!1,!1),F(l,"keydown",n[10],!1,!1,!1,!1),F(l,"scroll",n[15],!1,!1,!1,!1)],m=!0)},p:function(g,[y]){(!f||y&128)&&c.p(g[7]),dt(i,p=ce(h,[{spellcheck:"false"},{class:"carta-font-code"},{"aria-multiline":"true"},{"aria-describedby":"editor-unfocus-suggestion"},{tabindex:"0"},(!f||y&4)&&{placeholder:g[2]},y&8&&g[3]])),y&1&&ht(i,g[0]),mt(i,"s-Z_BxhC3l0TFj",!0),g[8]?d?(d.p(g,y),y&256&&v(d,1)):(d=Ve(g),d.c(),v(d,1),d.m(l,null)):d&&(z(),R(d,1,1,()=>{d=null}),H())},i:function(g){f||(v(d),f=!0)},o:function(g){R(d),f=!1},d:function(g){g&&(S(e),S(r),S(l)),n[16](null),n[18](null),n[21](null),d&&d.d(),n[22](null),m=!1,we(_)}};return I("SvelteRegisterBlock",{block:E,id:Oe.name,type:"component",source:"",ctx:n}),E}function en(n,e,t){let{$$slots:r={},$$scope:l}=e;me("Input",r,["default"]);let{carta:s}=e,{value:a=""}=e,{placeholder:c=""}=e,{elem:u}=e,{props:i={}}=e,o,f,m,_=a,h=!1,p=a;const d=()=>{if(!h||!o||(t(4,o.style.height="0",o),t(4,o.style.minHeight="0",o),t(4,o.style.height=o.scrollHeight+"px",o),t(4,o.style.minHeight=m.clientHeight+"px",o),t(4,o.scrollTop=0,o),!(document.activeElement===o))||!s.input)return;const M=s.input.getCursorXY();M&&(M.top<0||M.top+s.input.getRowHeight()>=u.scrollTop+u.clientHeight)&&u.scrollTo({top:M==null?void 0:M.top,behavior:"instant"})},E=()=>{var M;(M=window.getSelection())!=null&&M.toString()||o==null||o.focus()},T=async w=>{const M=await s.highlighter();if(!M)return;let ee;const k=await gt(()=>import("./highlight.DGAr_9BG.js"),__vite__mapDeps([0,1]),import.meta.url),{isSingleTheme:J}=k;J(M.theme)?ee=M.codeToHtml(w,{lang:M.lang,theme:M.theme}):ee=M.codeToHtml(w,{lang:M.lang,themes:M.theme}),s.sanitizer?t(7,_=s.sanitizer(ee)):t(7,_=ee),requestAnimationFrame(d)},g=ie(T,250),y=ie(async w=>{const M=await s.highlighter(),ee=await gt(()=>import("./highlight.DGAr_9BG.js"),__vite__mapDeps([0,1]),import.meta.url),{loadNestedLanguages:k}=ee;if(!M)return;const{updated:J}=await k(M,w);J&&g(w)},300),B=w=>{f&&(wt(f,p,w),requestAnimationFrame(d)),g(w),y(w)};Y(()=>{t(8,h=!0),requestAnimationFrame(d)}),Y(()=>{s.$setInput(o,u,()=>{t(0,a=o.value)})}),n.$$.on_mount.push(function(){s===void 0&&!("carta"in e||n.$$.bound[n.$$.props.carta])&&console.warn("<Input> was created without expected prop 'carta'"),u===void 0&&!("elem"in e||n.$$.bound[n.$$.props.elem])&&console.warn("<Input> was created without expected prop 'elem'")});const W=["carta","value","placeholder","elem","props"];Object.keys(e).forEach(w=>{!~W.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<Input> was created with unknown prop '${w}'`)});function $(w){zt.call(this,n,w)}function le(w){Z[w?"unshift":"push"](()=>{f=w,t(5,f)})}function he(){a=this.value,t(0,a)}function _e(w){Z[w?"unshift":"push"](()=>{o=w,t(4,o)})}const re=()=>t(4,o.scrollTop=0,o),be=()=>t(9,p=a);function ve(w){Z[w?"unshift":"push"](()=>{m=w,t(6,m)})}function ke(w){Z[w?"unshift":"push"](()=>{u=w,t(1,u)})}return n.$$set=w=>{"carta"in w&&t(11,s=w.carta),"value"in w&&t(0,a=w.value),"placeholder"in w&&t(2,c=w.placeholder),"elem"in w&&t(1,u=w.elem),"props"in w&&t(3,i=w.props),"$$scope"in w&&t(13,l=w.$$scope)},n.$capture_state=()=>({onMount:Y,debounce:ie,BROWSER:Kt,speculativeHighlightUpdate:wt,carta:s,value:a,placeholder:c,elem:u,props:i,textarea:o,highlightElem:f,wrapperElem:m,highlighted:_,mounted:h,prevValue:p,resize:d,focus:E,highlight:T,debouncedHighlight:g,highlightNestedLanguages:y,onValueChange:B}),n.$inject_state=w=>{"carta"in w&&t(11,s=w.carta),"value"in w&&t(0,a=w.value),"placeholder"in w&&t(2,c=w.placeholder),"elem"in w&&t(1,u=w.elem),"props"in w&&t(3,i=w.props),"textarea"in w&&t(4,o=w.textarea),"highlightElem"in w&&t(5,f=w.highlightElem),"wrapperElem"in w&&t(6,m=w.wrapperElem),"highlighted"in w&&t(7,_=w.highlighted),"mounted"in w&&t(8,h=w.mounted),"prevValue"in w&&t(9,p=w.prevValue)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&B(a)},[a,u,c,i,o,f,m,_,h,p,E,s,d,l,r,$,le,he,_e,re,be,ve,ke]}class Wt extends fe{constructor(e){super(e),de(this,e,en,Oe,ue,{carta:11,value:0,placeholder:2,elem:1,props:3,resize:12}),I("SvelteRegisterComponent",{component:this,tagName:"Input",options:e,id:Oe.name})}get carta(){throw new Error("<Input>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set carta(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<Input>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get placeholder(){throw new Error("<Input>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set placeholder(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem(){throw new Error("<Input>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get props(){throw new Error("<Input>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set props(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get resize(){return this.$$.ctx[12]}set resize(e){throw new Error("<Input>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const kt={writeTab:"Write",previewTab:"Preview",iconsLabels:{}};function ge(n){var l;if(n.key!=="ArrowLeft"&&n.key!=="ArrowRight")return;n.preventDefault();const e=(l=n.currentTarget.parentElement)==null?void 0:l.children;if(!e)return;const t=n.currentTarget.nextElementSibling??e[0],r=n.currentTarget.previousElementSibling??e[e.length-1];n.key==="ArrowRight"?t.focus():r.focus()}const Et="node_modules/carta-md/dist/internal/components/icons/MenuIcon.svelte";function De(n){let e,t;const r={c:function(){e=_t("svg"),t=_t("path"),this.h()},l:function(s){e=bt(s,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var a=A(e);t=bt(a,"path",{fill:!0,d:!0}),A(t).forEach(S),a.forEach(S),this.h()},h:function(){P(t,"fill","currentColor"),P(t,"d","M4 8a2 2 0 1 1-3.999.001A2 2 0 0 1 4 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 10 8m6 0a2 2 0 1 1-3.999.001A2 2 0 0 1 16 8"),j(t,Et,1,1,87),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"width","1em"),P(e,"height","1em"),P(e,"viewBox","0 0 16 16"),j(e,Et,0,0,0)},m:function(s,a){C(s,e,a),N(e,t)},p:Re,i:Re,o:Re,d:function(s){s&&S(e)}};return I("SvelteRegisterBlock",{block:r,id:De.name,type:"component",source:"",ctx:n}),r}function tn(n,e){let{$$slots:t={},$$scope:r}=e;me("MenuIcon",t,[]);const l=[];return Object.keys(e).forEach(s=>{!~l.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<MenuIcon> was created with unknown prop '${s}'`)}),[]}class Ft extends fe{constructor(e){super(e),de(this,e,tn,De,ue,{}),I("SvelteRegisterComponent",{component:this,tagName:"MenuIcon",options:e,id:De.name})}}const G="node_modules/carta-md/dist/internal/components/Toolbar.svelte";function Tt(n,e,t){const r=n.slice();r[28]=e[t];const l=r[3].iconsLabels[r[28].id]??r[28].label;return r[29]=l,r}function Ce(n){const e=n.slice(),t=e[3].iconsLabels.menu??"Menu";return e[29]=t,e}function yt(n,e,t){const r=n.slice();r[28]=e[t],r[33]=t;const l=r[3].iconsLabels[r[28].id]??r[28].label;return r[29]=l,r}function We(n){let e,t=n[3].writeTab+"",r,l,s,a,c=n[3].previewTab+"",u,i,o,f;const m={c:function(){e=V("button"),r=Be(t),s=Q(),a=V("button"),u=Be(c),this.h()},l:function(h){e=O(h,"BUTTON",{type:!0,tabindex:!0,class:!0});var p=A(e);r=Ne(p,t),p.forEach(S),s=X(h),a=O(h,"BUTTON",{type:!0,tabindex:!0,class:!0});var d=A(a);u=Ne(d,c),d.forEach(S),this.h()},h:function(){P(e,"type","button"),P(e,"tabindex",0),P(e,"class",l=n[0]==="write"?"carta-active":""),j(e,G,56,3,1626),P(a,"type","button"),P(a,"tabindex",-1),P(a,"class",i=n[0]==="preview"?"carta-active":""),j(a,G,65,3,1842)},m:function(h,p){C(h,e,p),N(e,r),C(h,s,p),C(h,a,p),N(a,u),o||(f=[F(e,"click",n[15],!1,!1,!1,!1),F(e,"keydown",ge,!1,!1,!1,!1),F(a,"click",n[16],!1,!1,!1,!1),F(a,"keydown",ge,!1,!1,!1,!1)],o=!0)},p:function(h,p){p[0]&8&&t!==(t=h[3].writeTab+"")&&je(r,t),p[0]&1&&l!==(l=h[0]==="write"?"carta-active":"")&&P(e,"class",l),p[0]&8&&c!==(c=h[3].previewTab+"")&&je(u,c),p[0]&1&&i!==(i=h[0]==="preview"?"carta-active":"")&&P(a,"class",i)},d:function(h){h&&(S(e),S(s),S(a)),o=!1,we(f)}};return I("SvelteRegisterBlock",{block:m,id:We.name,type:"if",source:"(56:2) {#if mode == 'tabs'}",ctx:n}),m}function Fe(n){let e,t,r,l=ne(n[4]),s=[];for(let i=0;i<l.length;i+=1)s[i]=Le(yt(n,l,i));const a=i=>R(s[i],1,1,()=>{s[i]=null});let c=n[11]&&Ue(Ce(n));const u={c:function(){for(let o=0;o<s.length;o+=1)s[o].c();e=Q(),c&&c.c(),t=D()},l:function(o){for(let f=0;f<s.length;f+=1)s[f].l(o);e=X(o),c&&c.l(o),t=D()},m:function(o,f){for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(o,f);C(o,e,f),c&&c.m(o,f),C(o,t,f),r=!0},p:function(o,f){if(f[0]&538){l=ne(o[4]);let m;for(m=0;m<l.length;m+=1){const _=yt(o,l,m);s[m]?(s[m].p(_,f),v(s[m],1)):(s[m]=Le(_),s[m].c(),v(s[m],1),s[m].m(e.parentNode,e))}for(z(),m=l.length;m<s.length;m+=1)a(m);H()}o[11]?c?(c.p(Ce(o),f),f[0]&2048&&v(c,1)):(c=Ue(Ce(o)),c.c(),v(c,1),c.m(t.parentNode,t)):c&&(z(),R(c,1,1,()=>{c=null}),H())},i:function(o){if(!r){for(let f=0;f<l.length;f+=1)v(s[f]);v(c),r=!0}},o:function(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)R(s[f]);R(c),r=!1},d:function(o){o&&(S(e),S(t)),Pe(s,o),c&&c.d(o)}};return I("SvelteRegisterBlock",{block:u,id:Fe.name,type:"if",source:"(81:2) {#if !(mode === 'tabs' && tab === 'preview')}",ctx:n}),u}function Le(n){let e,t,r,l,s,a,c,u;var i=n[28].component;function o(_,h){return{$$inline:!0}}i&&(t=oe(i,o()));function f(){return n[19](n[28])}const m={c:function(){e=V("button"),t&&L(t.$$.fragment),this.h()},l:function(h){e=O(h,"BUTTON",{class:!0,tabindex:!0,title:!0,"aria-label":!0});var p=A(e);t&&x(t.$$.fragment,p),p.forEach(S),this.h()},h:function(){P(e,"class","carta-icon s-s3VwdAcuPC1T"),P(e,"tabindex",n[33]==0?0:-1),P(e,"title",r=n[29]),P(e,"aria-label",l=n[29]),Se(()=>n[18].call(e)),j(e,G,83,4,2360)},m:function(h,p){C(h,e,p),t&&U(t,e,null),s=Ie(e,n[18].bind(e)),a=!0,c||(u=[F(e,"click",st(at(f)),!1,!0,!0,!1),F(e,"keydown",ge,!1,!1,!1,!1)],c=!0)},p:function(h,p){if(n=h,p[0]&16&&i!==(i=n[28].component)){if(t){z();const d=t;R(d.$$.fragment,1,0,()=>{q(d,1)}),H()}i?(t=oe(i,o()),L(t.$$.fragment),v(t.$$.fragment,1),U(t,e,null)):t=null}(!a||p[0]&24&&r!==(r=n[29]))&&P(e,"title",r),(!a||p[0]&24&&l!==(l=n[29]))&&P(e,"aria-label",l)},i:function(h){a||(t&&v(t.$$.fragment,h),a=!0)},o:function(h){t&&R(t.$$.fragment,h),a=!1},d:function(h){h&&S(e),t&&q(t),s(),c=!1,we(u)}};return I("SvelteRegisterBlock",{block:m,id:Le.name,type:"each",source:"(82:3) {#each visibleIcons as icon, index}",ctx:n}),m}function Ue(n){let e,t,r,l,s,a,c;t=new Ft({$$inline:!0});const u={c:function(){e=V("button"),L(t.$$.fragment),this.h()},l:function(o){e=O(o,"BUTTON",{class:!0,tabindex:!0,title:!0,"aria-label":!0});var f=A(e);x(t.$$.fragment,f),f.forEach(S),this.h()},h:function(){P(e,"class","carta-icon s-s3VwdAcuPC1T"),P(e,"tabindex",-1),P(e,"title",r=n[29]),P(e,"aria-label",l=n[29]),j(e,G,101,4,2886)},m:function(o,f){C(o,e,f),U(t,e,null),s=!0,a||(c=[F(e,"keydown",ge,!1,!1,!1,!1),F(e,"click",st(at(n[20])),!1,!0,!0,!1)],a=!0)},p:function(o,f){(!s||f[0]&8&&r!==(r=o[29]))&&P(e,"title",r),(!s||f[0]&8&&l!==(l=o[29]))&&P(e,"aria-label",l)},i:function(o){s||(v(t.$$.fragment,o),s=!0)},o:function(o){R(t.$$.fragment,o),s=!1},d:function(o){o&&S(e),q(t),a=!1,we(c)}};return I("SvelteRegisterBlock",{block:u,id:Ue.name,type:"if",source:"(100:3) {#if iconsHidden}",ctx:n}),u}function qe(n){let e,t,r=ne(n[1].icons.filter(n[24])),l=[];for(let c=0;c<r.length;c+=1)l[c]=Je(Tt(n,r,c));const s=c=>R(l[c],1,1,()=>{l[c]=null}),a={c:function(){e=V("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l:function(u){e=O(u,"DIV",{class:!0,style:!0});var i=A(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(S),this.h()},h:function(){P(e,"class","carta-icons-menu s-s3VwdAcuPC1T"),pt(e,"top",n[10]+"px"),j(e,G,117,1,3202)},m:function(u,i){C(u,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);n[26](e),t=!0},p:function(u,i){if(i[0]&4122){r=ne(u[1].icons.filter(u[24]));let o;for(o=0;o<r.length;o+=1){const f=Tt(u,r,o);l[o]?(l[o].p(f,i),v(l[o],1)):(l[o]=Je(f),l[o].c(),v(l[o],1),l[o].m(e,null))}for(z(),o=r.length;o<l.length;o+=1)s(o);H()}(!t||i[0]&1024)&&pt(e,"top",u[10]+"px")},i:function(u){if(!t){for(let i=0;i<r.length;i+=1)v(l[i]);t=!0}},o:function(u){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)R(l[i]);t=!1},d:function(u){u&&S(e),Pe(l,u),n[26](null)}};return I("SvelteRegisterBlock",{block:a,id:qe.name,type:"if",source:"(117:0) {#if showMenu && iconsHidden}",ctx:n}),a}function Je(n){let e,t,r,l,s=n[29]+"",a,c,u,i,o,f;var m=n[28].component;function _(d,E){return{$$inline:!0}}m&&(t=oe(m,_()));function h(){return n[25](n[28])}const p={c:function(){e=V("button"),t&&L(t.$$.fragment),r=Q(),l=V("span"),a=Be(s),c=Q(),this.h()},l:function(E){e=O(E,"BUTTON",{class:!0,"aria-label":!0});var T=A(e);t&&x(t.$$.fragment,T),r=X(T),l=O(T,"SPAN",{});var g=A(l);a=Ne(g,s),g.forEach(S),c=X(T),T.forEach(S),this.h()},h:function(){j(l,G,133,4,3776),P(e,"class","carta-icon-full s-s3VwdAcuPC1T"),P(e,"aria-label",u=n[29]),j(e,G,121,3,3425)},m:function(E,T){C(E,e,T),t&&U(t,e,null),N(e,r),N(e,l),N(l,a),N(e,c),i=!0,o||(f=[F(e,"click",st(at(h)),!1,!0,!0,!1),F(e,"keydown",ge,!1,!1,!1,!1)],o=!0)},p:function(E,T){if(n=E,T[0]&18&&m!==(m=n[28].component)){if(t){z();const g=t;R(g.$$.fragment,1,0,()=>{q(g,1)}),H()}m?(t=oe(m,_()),L(t.$$.fragment),v(t.$$.fragment,1),U(t,e,r)):t=null}(!i||T[0]&26)&&s!==(s=n[29]+"")&&je(a,s),(!i||T[0]&26&&u!==(u=n[29]))&&P(e,"aria-label",u)},i:function(E){i||(t&&v(t.$$.fragment,E),i=!0)},o:function(E){t&&R(t.$$.fragment,E),i=!1},d:function(E){E&&S(e),t&&q(t),o=!1,we(f)}};return I("SvelteRegisterBlock",{block:p,id:Je.name,type:"each",source:"(119:2) {#each carta.icons.filter((icon) => !visibleIcons.includes(icon)) as icon}",ctx:n}),p}function Ze(n){let e,t,r,l,s,a,c,u,i,o,f,m,_,h=n[2]=="tabs"&&We(n),p=!(n[2]==="tabs"&&n[0]==="preview")&&Fe(n),d=n[12]&&n[11]&&qe(n);const E={c:function(){e=V("div"),t=V("div"),h&&h.c(),r=Q(),l=V("div"),a=Q(),c=V("div"),p&&p.c(),i=Q(),d&&d.c(),o=D(),this.h()},l:function(g){e=O(g,"DIV",{class:!0,role:!0});var y=A(e);t=O(y,"DIV",{class:!0});var B=A(t);h&&h.l(B),B.forEach(S),r=X(y),l=O(y,"DIV",{class:!0}),A(l).forEach(S),a=X(y),c=O(y,"DIV",{class:!0});var W=A(c);p&&p.l(W),W.forEach(S),y.forEach(S),i=X(g),d&&d.l(g),o=D(),this.h()},h:function(){P(t,"class","carta-toolbar-left s-s3VwdAcuPC1T"),j(t,G,54,1,1567),P(l,"class","carta-filler s-s3VwdAcuPC1T"),Se(()=>n[17].call(l)),j(l,G,77,1,2080),P(c,"class","carta-toolbar-right s-s3VwdAcuPC1T"),j(c,G,79,1,2145),P(e,"class","carta-toolbar s-s3VwdAcuPC1T"),P(e,"role","toolbar"),Se(()=>n[22].call(e)),j(e,G,53,0,1469)},m:function(g,y){C(g,e,y),N(e,t),h&&h.m(t,null),N(e,r),N(e,l),s=Ie(l,n[17].bind(l)),N(e,a),N(e,c),p&&p.m(c,null),n[21](c),u=Ie(e,n[22].bind(e)),n[23](e),C(g,i,y),d&&d.m(g,y),C(g,o,y),f=!0,m||(_=[F(window,"resize",n[13],!1,!1,!1,!1),F(window,"click",n[14],!1,!1,!1,!1)],m=!0)},p:function(g,y){g[2]=="tabs"?h?h.p(g,y):(h=We(g),h.c(),h.m(t,null)):h&&(h.d(1),h=null),g[2]==="tabs"&&g[0]==="preview"?p&&(z(),R(p,1,1,()=>{p=null}),H()):p?(p.p(g,y),y[0]&5&&v(p,1)):(p=Fe(g),p.c(),v(p,1),p.m(c,null)),g[12]&&g[11]?d?(d.p(g,y),y[0]&6144&&v(d,1)):(d=qe(g),d.c(),v(d,1),d.m(o.parentNode,o)):d&&(z(),R(d,1,1,()=>{d=null}),H())},i:function(g){f||(v(p),v(d),f=!0)},o:function(g){R(p),R(d),f=!1},d:function(g){g&&(S(e),S(i),S(o)),h&&h.d(),s(),p&&p.d(),n[21](null),u(),n[23](null),d&&d.d(g),m=!1,we(_)}};return I("SvelteRegisterBlock",{block:E,id:Ze.name,type:"component",source:"",ctx:n}),E}const Pt=8;function nn(n,e,t){let{$$slots:r={},$$scope:l}=e;me("Toolbar",r,[]);let{carta:s}=e,{mode:a}=e,{tab:c}=e,{labels:u}=e,i,o,f,m=[...s.icons],_=0,h=0,p=0,d=!1,E=!1;const T=()=>new Promise(requestAnimationFrame),g=ie(async()=>{if(!i||!f)return;const k=()=>i.scrollWidth-i.clientWidth>0;for(;k();)m.pop(),t(4,m),await T();const J=()=>_>2*h+Pt;for(;m.length<s.icons.length&&J();)m.push(s.icons[m.length]),t(4,m),await T()},100);function y(k){const J=k.target;o&&!o.contains(J)&&t(12,E=!1)}Y(g),n.$$.on_mount.push(function(){s===void 0&&!("carta"in e||n.$$.bound[n.$$.props.carta])&&console.warn("<Toolbar> was created without expected prop 'carta'"),a===void 0&&!("mode"in e||n.$$.bound[n.$$.props.mode])&&console.warn("<Toolbar> was created without expected prop 'mode'"),c===void 0&&!("tab"in e||n.$$.bound[n.$$.props.tab])&&console.warn("<Toolbar> was created without expected prop 'tab'"),u===void 0&&!("labels"in e||n.$$.bound[n.$$.props.labels])&&console.warn("<Toolbar> was created without expected prop 'labels'")});const B=["carta","mode","tab","labels"];Object.keys(e).forEach(k=>{!~B.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${k}'`)});const W=()=>t(0,c="write"),$=()=>t(0,c="preview");function le(){_=this.clientWidth,t(8,_)}function he(){h=this.clientWidth,t(9,h)}const _e=k=>{var J,se;s.input&&k.action(s.input),(J=s.input)==null||J.update(),(se=s.input)==null||se.textarea.focus()},re=()=>t(12,E=!E);function be(k){Z[k?"unshift":"push"](()=>{f=k,t(7,f)})}function ve(){p=this.clientHeight,t(10,p)}function ke(k){Z[k?"unshift":"push"](()=>{i=k,t(5,i)})}const w=k=>!m.includes(k),M=k=>{var J,se;s.input&&k.action(s.input),(J=s.input)==null||J.update(),(se=s.input)==null||se.textarea.focus(),t(12,E=!1)};function ee(k){Z[k?"unshift":"push"](()=>{o=k,t(6,o)})}return n.$$set=k=>{"carta"in k&&t(1,s=k.carta),"mode"in k&&t(2,a=k.mode),"tab"in k&&t(0,c=k.tab),"labels"in k&&t(3,u=k.labels)},n.$capture_state=()=>({handleArrowKeysNavigation:ge,MenuIcon:Ft,onMount:Y,debounce:ie,carta:s,mode:a,tab:c,labels:u,toolbar:i,menu:o,iconsContainer:f,visibleIcons:m,availableWidth:_,iconWidth:h,toolbarHeight:p,iconsHidden:d,showMenu:E,IconPadding:Pt,waitForDOMUpdate:T,onResize:g,onClick:y}),n.$inject_state=k=>{"carta"in k&&t(1,s=k.carta),"mode"in k&&t(2,a=k.mode),"tab"in k&&t(0,c=k.tab),"labels"in k&&t(3,u=k.labels),"toolbar"in k&&t(5,i=k.toolbar),"menu"in k&&t(6,o=k.menu),"iconsContainer"in k&&t(7,f=k.iconsContainer),"visibleIcons"in k&&t(4,m=k.visibleIcons),"availableWidth"in k&&t(8,_=k.availableWidth),"iconWidth"in k&&t(9,h=k.iconWidth),"toolbarHeight"in k&&t(10,p=k.toolbarHeight),"iconsHidden"in k&&t(11,d=k.iconsHidden),"showMenu"in k&&t(12,E=k.showMenu)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&18&&t(11,d=m.length!==s.icons.length)},[c,s,a,u,m,i,o,f,_,h,p,d,E,g,y,W,$,le,he,_e,re,be,ve,ke,w,M,ee]}class Lt extends fe{constructor(e){super(e),de(this,e,nn,Ze,ue,{carta:1,mode:2,tab:0,labels:3},null,[-1,-1]),I("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:Ze.name})}get carta(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set carta(e){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get tab(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tab(e){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get labels(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set labels(e){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Me="node_modules/carta-md/dist/MarkdownEditor.svelte";function Rt(n,e,t){const r=n.slice();return r[32]=e[t].component,r[33]=e[t].props,r}function St(n,e,t){const r=n.slice();return r[32]=e[t].component,r[33]=e[t].props,r}function It(n,e,t){const r=n.slice();return r[32]=e[t].component,r[33]=e[t].props,r}function Qe(n){let e,t,r;function l(c){n[20](c)}let s={carta:n[2],labels:n[15],mode:n[9]};n[0]!==void 0&&(s.tab=n[0]),e=new Lt({props:s,$$inline:!0}),Z.push(()=>ye(e,"tab",l));const a={c:function(){L(e.$$.fragment)},l:function(u){x(e.$$.fragment,u)},m:function(u,i){U(e,u,i),r=!0},p:function(u,i){const o={};i[0]&4&&(o.carta=u[2]),i[0]&512&&(o.mode=u[9]),!t&&i[0]&1&&(t=!0,o.tab=u[0],Te(()=>t=!1)),e.$set(o)},i:function(u){r||(v(e.$$.fragment,u),r=!0)},o:function(u){R(e.$$.fragment,u),r=!1},d:function(u){q(e,u)}};return I("SvelteRegisterBlock",{block:a,id:Qe.name,type:"if",source:"(89:1) {#if !disableToolbar}",ctx:n}),a}function Xe(n){let e,t,r,l,s;function a(f){n[21](f)}function c(f){n[22](f)}function u(f){n[23](f)}let i={carta:n[2],placeholder:n[6],props:n[7],$$slots:{default:[Ut]},$$scope:{ctx:n}};n[1]!==void 0&&(i.value=n[1]),n[10]!==void 0&&(i.resize=n[10]),n[11]!==void 0&&(i.elem=n[11]),e=new Wt({props:i,$$inline:!0}),Z.push(()=>ye(e,"value",a)),Z.push(()=>ye(e,"resize",c)),Z.push(()=>ye(e,"elem",u)),e.$on("scroll",n[16]);const o={c:function(){L(e.$$.fragment)},l:function(m){x(e.$$.fragment,m)},m:function(m,_){U(e,m,_),s=!0},p:function(m,_){const h={};_[0]&4&&(h.carta=m[2]),_[0]&64&&(h.placeholder=m[6]),_[0]&128&&(h.props=m[7]),_[0]&8196|_[1]&512&&(h.$$scope={dirty:_,ctx:m}),!t&&_[0]&2&&(t=!0,h.value=m[1],Te(()=>t=!1)),!r&&_[0]&1024&&(r=!0,h.resize=m[10],Te(()=>r=!1)),!l&&_[0]&2048&&(l=!0,h.elem=m[11],Te(()=>l=!1)),e.$set(h)},i:function(m){s||(v(e.$$.fragment,m),s=!0)},o:function(m){R(e.$$.fragment,m),s=!1},d:function(m){q(e,m)}};return I("SvelteRegisterBlock",{block:o,id:Xe.name,type:"if",source:"(95:3) {#if windowMode == 'split' || selectedTab == 'write'}",ctx:n}),o}function Ke(n){let e,t,r=ne(n[2].components.filter(Mt)),l=[];for(let c=0;c<r.length;c+=1)l[c]=Ge(It(n,r,c));const s=c=>R(l[c],1,1,()=>{l[c]=null}),a={c:function(){for(let u=0;u<l.length;u+=1)l[u].c();e=D()},l:function(u){for(let i=0;i<l.length;i+=1)l[i].l(u);e=D()},m:function(u,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(u,i);C(u,e,i),t=!0},p:function(u,i){if(i[0]&4){r=ne(u[2].components.filter(Mt));let o;for(o=0;o<r.length;o+=1){const f=It(u,r,o);l[o]?(l[o].p(f,i),v(l[o],1)):(l[o]=Ge(f),l[o].c(),v(l[o],1),l[o].m(e.parentNode,e))}for(z(),o=r.length;o<l.length;o+=1)s(o);H()}},i:function(u){if(!t){for(let i=0;i<r.length;i+=1)v(l[i]);t=!0}},o:function(u){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)R(l[i]);t=!1},d:function(u){u&&S(e),Pe(l,u)}};return I("SvelteRegisterBlock",{block:a,id:Ke.name,type:"if",source:"(106:5) {#if mounted}",ctx:n}),a}function Ge(n){let e,t,r;const l=[{carta:n[2]},n[33]];var s=n[32];function a(u,i){let o={};for(let f=0;f<l.length;f+=1)o=K(o,l[f]);return i!==void 0&&i[0]&4&&(o=K(o,ce(l,[{carta:u[2]},ae(u[33])]))),{props:o,$$inline:!0}}s&&(e=oe(s,a(n)));const c={c:function(){e&&L(e.$$.fragment),t=D()},l:function(i){e&&x(e.$$.fragment,i),t=D()},m:function(i,o){e&&U(e,i,o),C(i,t,o),r=!0},p:function(i,o){if(o[0]&4&&s!==(s=i[32])){if(e){z();const f=e;R(f.$$.fragment,1,0,()=>{q(f,1)}),H()}s?(e=oe(s,a(i,o)),L(e.$$.fragment),v(e.$$.fragment,1),U(e,t.parentNode,t)):e=null}else if(s){const f=o[0]&4?ce(l,[{carta:i[2]},ae(i[33])]):{};e.$set(f)}},i:function(i){r||(e&&v(e.$$.fragment,i),r=!0)},o:function(i){e&&R(e.$$.fragment,i),r=!1},d:function(i){i&&S(t),e&&q(e,i)}};return I("SvelteRegisterBlock",{block:c,id:Ge.name,type:"each",source:"(107:6) {#each carta.components.filter(({ parent }) => [parent]         .flat()         .includes('input')) as { component, props }}",ctx:n}),c}function Ut(n){let e,t,r=n[13]&&Ke(n);const l={c:function(){r&&r.c(),e=D()},l:function(a){r&&r.l(a),e=D()},m:function(a,c){r&&r.m(a,c),C(a,e,c),t=!0},p:function(a,c){a[13]?r?(r.p(a,c),c[0]&8192&&v(r,1)):(r=Ke(a),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(z(),R(r,1,1,()=>{r=null}),H())},i:function(a){t||(v(r),t=!0)},o:function(a){R(r),t=!1},d:function(a){a&&S(e),r&&r.d(a)}};return I("SvelteRegisterBlock",{block:l,id:Ut.name,type:"slot",source:"(96:4) <Input      {carta}      {placeholder}      props={textarea}      bind:value      bind:resize={resizeInput}      bind:elem={inputElem}      on:scroll={handleScroll}     >",ctx:n}),l}function Ye(n){let e,t,r;function l(c){n[24](c)}let s={carta:n[2],value:n[1],$$slots:{default:[qt]},$$scope:{ctx:n}};n[12]!==void 0&&(s.elem=n[12]),e=new Dt({props:s,$$inline:!0}),Z.push(()=>ye(e,"elem",l)),e.$on("scroll",n[16]),e.$on("render",n[25]);const a={c:function(){L(e.$$.fragment)},l:function(u){x(e.$$.fragment,u)},m:function(u,i){U(e,u,i),r=!0},p:function(u,i){const o={};i[0]&4&&(o.carta=u[2]),i[0]&2&&(o.value=u[1]),i[0]&8196|i[1]&512&&(o.$$scope={dirty:i,ctx:u}),!t&&i[0]&4096&&(t=!0,o.elem=u[12],Te(()=>t=!1)),e.$set(o)},i:function(u){r||(v(e.$$.fragment,u),r=!0)},o:function(u){R(e.$$.fragment,u),r=!1},d:function(u){q(e,u)}};return I("SvelteRegisterBlock",{block:a,id:Ye.name,type:"if",source:"(115:3) {#if windowMode == 'split' || selectedTab == 'preview'}",ctx:n}),a}function xe(n){let e,t,r=ne(n[2].components.filter(Bt)),l=[];for(let c=0;c<r.length;c+=1)l[c]=$e(St(n,r,c));const s=c=>R(l[c],1,1,()=>{l[c]=null}),a={c:function(){for(let u=0;u<l.length;u+=1)l[u].c();e=D()},l:function(u){for(let i=0;i<l.length;i+=1)l[i].l(u);e=D()},m:function(u,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(u,i);C(u,e,i),t=!0},p:function(u,i){if(i[0]&4){r=ne(u[2].components.filter(Bt));let o;for(o=0;o<r.length;o+=1){const f=St(u,r,o);l[o]?(l[o].p(f,i),v(l[o],1)):(l[o]=$e(f),l[o].c(),v(l[o],1),l[o].m(e.parentNode,e))}for(z(),o=r.length;o<l.length;o+=1)s(o);H()}},i:function(u){if(!t){for(let i=0;i<r.length;i+=1)v(l[i]);t=!0}},o:function(u){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)R(l[i]);t=!1},d:function(u){u&&S(e),Pe(l,u)}};return I("SvelteRegisterBlock",{block:a,id:xe.name,type:"if",source:"(128:5) {#if mounted}",ctx:n}),a}function $e(n){let e,t,r;const l=[{carta:n[2]},n[33]];var s=n[32];function a(u,i){let o={};for(let f=0;f<l.length;f+=1)o=K(o,l[f]);return i!==void 0&&i[0]&4&&(o=K(o,ce(l,[{carta:u[2]},ae(u[33])]))),{props:o,$$inline:!0}}s&&(e=oe(s,a(n)));const c={c:function(){e&&L(e.$$.fragment),t=D()},l:function(i){e&&x(e.$$.fragment,i),t=D()},m:function(i,o){e&&U(e,i,o),C(i,t,o),r=!0},p:function(i,o){if(o[0]&4&&s!==(s=i[32])){if(e){z();const f=e;R(f.$$.fragment,1,0,()=>{q(f,1)}),H()}s?(e=oe(s,a(i,o)),L(e.$$.fragment),v(e.$$.fragment,1),U(e,t.parentNode,t)):e=null}else if(s){const f=o[0]&4?ce(l,[{carta:i[2]},ae(i[33])]):{};e.$set(f)}},i:function(i){r||(e&&v(e.$$.fragment,i),r=!0)},o:function(i){e&&R(e.$$.fragment,i),r=!1},d:function(i){i&&S(t),e&&q(e,i)}};return I("SvelteRegisterBlock",{block:c,id:$e.name,type:"each",source:"(129:6) {#each carta.components.filter(({ parent }) => [parent]         .flat()         .includes('renderer')) as { component, props }}",ctx:n}),c}function qt(n){let e,t,r=n[13]&&xe(n);const l={c:function(){r&&r.c(),e=D()},l:function(a){r&&r.l(a),e=D()},m:function(a,c){r&&r.m(a,c),C(a,e,c),t=!0},p:function(a,c){a[13]?r?(r.p(a,c),c[0]&8192&&v(r,1)):(r=xe(a),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(z(),R(r,1,1,()=>{r=null}),H())},i:function(a){t||(v(r),t=!0)},o:function(a){R(r),t=!1},d:function(a){a&&S(e),r&&r.d(a)}};return I("SvelteRegisterBlock",{block:l,id:qt.name,type:"slot",source:"(116:4) <Renderer      {carta}      {value}      bind:elem={rendererElem}      on:scroll={handleScroll}      on:render={() => {       if (windowMode != 'split') return;       if (scroll != 'sync') return;       synchronizeScroll(inputElem, rendererElem);      }}     >",ctx:n}),l}function et(n){let e,t,r=ne(n[2].components.filter(Nt)),l=[];for(let c=0;c<r.length;c+=1)l[c]=tt(Rt(n,r,c));const s=c=>R(l[c],1,1,()=>{l[c]=null}),a={c:function(){for(let u=0;u<l.length;u+=1)l[u].c();e=D()},l:function(u){for(let i=0;i<l.length;i+=1)l[i].l(u);e=D()},m:function(u,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(u,i);C(u,e,i),t=!0},p:function(u,i){if(i[0]&4){r=ne(u[2].components.filter(Nt));let o;for(o=0;o<r.length;o+=1){const f=Rt(u,r,o);l[o]?(l[o].p(f,i),v(l[o],1)):(l[o]=tt(f),l[o].c(),v(l[o],1),l[o].m(e.parentNode,e))}for(z(),o=r.length;o<l.length;o+=1)s(o);H()}},i:function(u){if(!t){for(let i=0;i<r.length;i+=1)v(l[i]);t=!0}},o:function(u){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)R(l[i]);t=!1},d:function(u){u&&S(e),Pe(l,u)}};return I("SvelteRegisterBlock",{block:a,id:et.name,type:"if",source:"(142:1) {#if mounted}",ctx:n}),a}function tt(n){let e,t,r;const l=[{carta:n[2]},n[33]];var s=n[32];function a(u,i){let o={};for(let f=0;f<l.length;f+=1)o=K(o,l[f]);return i!==void 0&&i[0]&4&&(o=K(o,ce(l,[{carta:u[2]},ae(u[33])]))),{props:o,$$inline:!0}}s&&(e=oe(s,a(n)));const c={c:function(){e&&L(e.$$.fragment),t=D()},l:function(i){e&&x(e.$$.fragment,i),t=D()},m:function(i,o){e&&U(e,i,o),C(i,t,o),r=!0},p:function(i,o){if(o[0]&4&&s!==(s=i[32])){if(e){z();const f=e;R(f.$$.fragment,1,0,()=>{q(f,1)}),H()}s?(e=oe(s,a(i,o)),L(e.$$.fragment),v(e.$$.fragment,1),U(e,t.parentNode,t)):e=null}else if(s){const f=o[0]&4?ce(l,[{carta:i[2]},ae(i[33])]):{};e.$set(f)}},i:function(i){r||(e&&v(e.$$.fragment,i),r=!0)},o:function(i){e&&R(e.$$.fragment,i),r=!1},d:function(i){i&&S(t),e&&q(e,i)}};return I("SvelteRegisterBlock",{block:c,id:tt.name,type:"each",source:"(143:2) {#each carta.components.filter(({ parent }) => [parent]     .flat()     .includes('editor')) as { component, props }}",ctx:n}),c}function nt(n){let e,t,r,l,s,a,c,u,i,o,f=!n[5]&&Qe(n),m=(n[9]=="split"||n[0]=="write")&&Xe(n),_=(n[9]=="split"||n[0]=="preview")&&Ye(n),h=n[13]&&et(n);const p={c:function(){e=V("div"),f&&f.c(),t=Q(),r=V("div"),l=V("div"),m&&m.c(),s=Q(),_&&_.c(),c=Q(),h&&h.c(),this.h()},l:function(E){e=O(E,"DIV",{class:!0});var T=A(e);f&&f.l(T),t=X(T),r=O(T,"DIV",{class:!0});var g=A(r);l=O(g,"DIV",{class:!0});var y=A(l);m&&m.l(y),s=X(y),_&&_.l(y),y.forEach(S),g.forEach(S),c=X(T),h&&h.l(T),T.forEach(S),this.h()},h:function(){P(l,"class",a="carta-container mode-"+n[9]+" s-zQUCmCRjJuJO"),j(l,Me,93,2,2933),P(r,"class","carta-wrapper"),j(r,Me,92,1,2903),P(e,"class",u="carta-editor carta-theme__"+n[3]+" s-zQUCmCRjJuJO"),Se(()=>n[27].call(e)),j(e,Me,87,0,2703)},m:function(E,T){C(E,e,T),f&&f.m(e,null),N(e,t),N(e,r),N(r,l),m&&m.m(l,null),N(l,s),_&&_.m(l,null),N(e,c),h&&h.m(e,null),n[26](e),i=Ie(e,n[27].bind(e)),o=!0},p:function(E,T){E[5]?f&&(z(),R(f,1,1,()=>{f=null}),H()):f?(f.p(E,T),T[0]&32&&v(f,1)):(f=Qe(E),f.c(),v(f,1),f.m(e,t)),E[9]=="split"||E[0]=="write"?m?(m.p(E,T),T[0]&513&&v(m,1)):(m=Xe(E),m.c(),v(m,1),m.m(l,s)):m&&(z(),R(m,1,1,()=>{m=null}),H()),E[9]=="split"||E[0]=="preview"?_?(_.p(E,T),T[0]&513&&v(_,1)):(_=Ye(E),_.c(),v(_,1),_.m(l,null)):_&&(z(),R(_,1,1,()=>{_=null}),H()),(!o||T[0]&512&&a!==(a="carta-container mode-"+E[9]+" s-zQUCmCRjJuJO"))&&P(l,"class",a),E[13]?h?(h.p(E,T),T[0]&8192&&v(h,1)):(h=et(E),h.c(),v(h,1),h.m(e,null)):h&&(z(),R(h,1,1,()=>{h=null}),H()),(!o||T[0]&8&&u!==(u="carta-editor carta-theme__"+E[3]+" s-zQUCmCRjJuJO"))&&P(e,"class",u)},i:function(E){o||(v(f),v(m),v(_),v(h),o=!0)},o:function(E){R(f),R(m),R(_),R(h),o=!1},d:function(E){E&&S(e),f&&f.d(),m&&m.d(),_&&_.d(),h&&h.d(),n[26](null),i()}};return I("SvelteRegisterBlock",{block:p,id:nt.name,type:"component",source:"",ctx:n}),p}function Ct(n){const e=n.scrollHeight-n.clientHeight;return n.scrollTop*(1+n.clientHeight/e)/n.scrollHeight}const Mt=({parent:n})=>[n].flat().includes("input"),Bt=({parent:n})=>[n].flat().includes("renderer"),Nt=({parent:n})=>[n].flat().includes("editor");function on(n,e,t){let{$$slots:r={},$$scope:l}=e;me("MarkdownEditor",r,[]);let{carta:s}=e,{theme:a="default"}=e,{value:c=""}=e,{mode:u="auto"}=e,{scroll:i="sync"}=e,{disableToolbar:o=!1}=e,{placeholder:f=""}=e,{textarea:m={}}=e,{selectedTab:_="write"}=e,{labels:h={}}=e;const p={...kt,...h};let d,E,T=!1,g,y,B,W,$,le=0;const he=ie(()=>{$=null},1e3);function _e(b){const[te,pe]=b.target==B?[B,W]:[W,B];E=="split"&&i=="sync"&&re(te,pe)}function re(b,te){const pe=Ct(b);if(le=pe,$&&$!=b)return;$=b;const Zt=te.scrollHeight-te.clientHeight;te.scrollTo({top:pe*Zt,behavior:"smooth"}),he()}function be(b){if(E!=="tabs")return;const te=b==="write"?B:W;if(!te)return;const pe=te.scrollHeight-te.clientHeight;te.scroll({top:pe*le,behavior:"instant"})}Y(()=>s.$setElement(y)),Y(()=>t(13,T=!0)),n.$$.on_mount.push(function(){s===void 0&&!("carta"in e||n.$$.bound[n.$$.props.carta])&&console.warn("<MarkdownEditor> was created without expected prop 'carta'")});const ve=["carta","theme","value","mode","scroll","disableToolbar","placeholder","textarea","selectedTab","labels"];Object.keys(e).forEach(b=>{!~ve.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<MarkdownEditor> was created with unknown prop '${b}'`)});function ke(b){_=b,t(0,_)}function w(b){c=b,t(1,c)}function M(b){g=b,t(10,g)}function ee(b){B=b,t(11,B)}function k(b){W=b,t(12,W)}const J=()=>{E=="split"&&i=="sync"&&re(B,W)};function se(b){Z[b?"unshift":"push"](()=>{y=b,t(14,y)})}function Jt(){d=this.clientWidth,t(8,d)}return n.$$set=b=>{"carta"in b&&t(2,s=b.carta),"theme"in b&&t(3,a=b.theme),"value"in b&&t(1,c=b.value),"mode"in b&&t(18,u=b.mode),"scroll"in b&&t(4,i=b.scroll),"disableToolbar"in b&&t(5,o=b.disableToolbar),"placeholder"in b&&t(6,f=b.placeholder),"textarea"in b&&t(7,m=b.textarea),"selectedTab"in b&&t(0,_=b.selectedTab),"labels"in b&&t(19,h=b.labels)},n.$capture_state=()=>({onMount:Y,Renderer:Dt,Input:Wt,debounce:ie,defaultLabels:kt,Toolbar:Lt,carta:s,theme:a,value:c,mode:u,scroll:i,disableToolbar:o,placeholder:f,textarea:m,selectedTab:_,userLabels:h,labels:p,width:d,windowMode:E,mounted:T,resizeInput:g,editorElem:y,inputElem:B,rendererElem:W,currentlyScrolling:$,currentScrollPercentage:le,calculateScrollPercentage:Ct,clearCurrentlyScrolling:he,handleScroll:_e,synchronizeScroll:re,loadScrollPosition:be}),n.$inject_state=b=>{"carta"in b&&t(2,s=b.carta),"theme"in b&&t(3,a=b.theme),"value"in b&&t(1,c=b.value),"mode"in b&&t(18,u=b.mode),"scroll"in b&&t(4,i=b.scroll),"disableToolbar"in b&&t(5,o=b.disableToolbar),"placeholder"in b&&t(6,f=b.placeholder),"textarea"in b&&t(7,m=b.textarea),"selectedTab"in b&&t(0,_=b.selectedTab),"userLabels"in b&&t(19,h=b.userLabels),"width"in b&&t(8,d=b.width),"windowMode"in b&&t(9,E=b.windowMode),"mounted"in b&&t(13,T=b.mounted),"resizeInput"in b&&t(10,g=b.resizeInput),"editorElem"in b&&t(14,y=b.editorElem),"inputElem"in b&&t(11,B=b.inputElem),"rendererElem"in b&&t(12,W=b.rendererElem),"currentlyScrolling"in b&&($=b.currentlyScrolling),"currentScrollPercentage"in b&&(le=b.currentScrollPercentage)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&262400&&t(9,E=u==="auto"?d>768?"split":"tabs":u),n.$$.dirty[0]&1536&&g&&g(),n.$$.dirty[0]&6145&&be(_)},[_,c,s,a,i,o,f,m,d,E,g,B,W,T,y,p,_e,re,u,h,ke,w,M,ee,k,J,se,Jt]}class mn extends fe{constructor(e){super(e),de(this,e,on,nt,ue,{carta:2,theme:3,value:1,mode:18,scroll:4,disableToolbar:5,placeholder:6,textarea:7,selectedTab:0,labels:19},null,[-1,-1]),I("SvelteRegisterComponent",{component:this,tagName:"MarkdownEditor",options:e,id:nt.name})}get carta(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set carta(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get theme(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set theme(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get scroll(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set scroll(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get disableToolbar(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set disableToolbar(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get placeholder(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set placeholder(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get textarea(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set textarea(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selectedTab(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selectedTab(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get labels(){throw new Error("<MarkdownEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set labels(e){throw new Error("<MarkdownEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function ot(n){let e,t;e=new Ot({props:{class:"h-5 w-5"},$$inline:!0});const r={c:function(){L(e.$$.fragment)},l:function(s){x(e.$$.fragment,s)},m:function(s,a){U(e,s,a),t=!0},p:Re,i:function(s){t||(v(e.$$.fragment,s),t=!0)},o:function(s){R(e.$$.fragment,s),t=!1},d:function(s){q(e,s)}};return I("SvelteRegisterBlock",{block:r,id:ot.name,type:"component",source:"",ctx:n}),r}function ln(n,e,t){let{$$slots:r={},$$scope:l}=e;me("Attachment_icon",r,[]);const s=[];return Object.keys(e).forEach(a=>{!~s.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Attachment_icon> was created with unknown prop '${a}'`)}),n.$capture_state=()=>({ImagePlus:Ot}),[]}class hn extends fe{constructor(e){super(e),de(this,e,ln,ot,ue,{}),I("SvelteRegisterComponent",{component:this,tagName:"Attachment_icon",options:e,id:ot.name})}}export{hn as A,mn as M};
